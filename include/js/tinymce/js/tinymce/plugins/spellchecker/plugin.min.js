var $jscomp={scope:{},findInternal:function(f,p,g){f instanceof String&&(f=String(f));for(var r=f.length,n=0;n<r;n++){var z=f[n];if(p.call(g,z,n,f))return{i:n,v:z}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,p,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[p]=g.value)};
$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(f,p,g,r){if(p){g=$jscomp.global;f=f.split(".");for(r=0;r<f.length-1;r++){var n=f[r];n in g||(g[n]={});g=g[n]}f=f[f.length-1];r=g[f];p=p(r);p!=r&&null!=p&&$jscomp.defineProperty(g,f,{configurable:!0,writable:!0,value:p})}};
$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,g){return $jscomp.findInternal(this,f,g).v}},"es6-impl","es3");
!function(){function f(a){return a&&1===a.nodeType&&"false"===a.contentEditable}function p(a,b){function c(a,t){if(!a[0])throw Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:a.index,end:a.index+a[0].length,text:a[0],data:t}}function e(b){var t=a.getElementsByTagName("*"),F=[];b="number"==typeof b?""+b:null;for(var c=0;c<t.length;c++){var x=t[c],d=x.getAttribute("data-mce-index");null!==d&&d.length&&-1!==x.className.indexOf("mce-spellchecker-word")&&(d!==b&&null!==b||
F.push(x))}return F}function d(a){for(var b=l.length;b--;)if(l[b]===a)return b;return-1}function k(a){for(var b=0,c=l.length;b<c&&!1!==a(l[b],b);b++);return this}function h(a){var b,c=e(a?d(a):null);for(a=c.length;a--;)(b=c[a]).parentNode.insertBefore(b.firstChild,b),b.parentNode.removeChild(b);return this}function g(a){a=e(d(a));var c=b.dom.createRng();return c.setStartBefore(a[0]),c.setEndAfter(a[a.length-1]),c}var n,q,u,w,B,l=[],p=b.dom;return u=b.schema.getBlockElements(),w=b.schema.getWhiteSpaceElements(),
B=b.schema.getShortEndedElements(),{text:q=function t(a){var b;if(3===a.nodeType)return a.data;if(w[a.nodeName]&&!u[a.nodeName])return"";if(f(a))return"\n";if(b="",(u[a.nodeName]||B[a.nodeName])&&(b+="\n"),a=a.firstChild)for(;b+=t(a),a=a.nextSibling;);return b}(a),matches:l,each:k,filter:function(a){var b=[];return k(function(c,d){a(c,d)&&b.push(c)}),l=b,this},reset:function(){return l.splice(0,l.length),h(),this},matchFromElement:function(a){return l[a.getAttribute("data-mce-index")]},elementFromMatch:function(a){return e(d(a))[0]},
find:function(a,b){if(q&&a.global)for(;n=a.exec(q);)l.push(c(n,b));return this},add:function(a,b,c){return l.push({start:a,end:a+b,text:q.substr(a,b),data:c}),this},wrap:function(b){return l.length&&function(a,b,c){var d,e,x,l,h,k=[],g=0,m=a,q=0;(b=b.slice(0)).sort(function(a,b){return a.start-b.start});h=b.shift();a:for(;;){if((u[m.nodeName]||B[m.nodeName]||f(m))&&g++,3===m.nodeType&&(!e&&m.length+g>=h.end?(e=m,l=h.end-g):d&&k.push(m),!d&&m.length+g>h.start&&(d=m,x=h.start-g),g+=m.length),d&&e){if(m=
c({startNode:d,startNodeIndex:x,endNode:e,endNodeIndex:l,innerNodes:k,match:h.text,matchIndex:q}),g-=e.length-l,d=null,e=null,k=[],q++,!(h=b.shift()))break}else if(w[m.nodeName]&&!u[m.nodeName]||!m.firstChild){if(m.nextSibling){m=m.nextSibling;continue}}else if(!f(m)){m=m.firstChild;continue}for(;;){if(m.nextSibling){m=m.nextSibling;break}if(m.parentNode===a)break a;m=m.parentNode}}}(a,l,function(a){function b(b,c){var d=l[c];d.stencil||(d.stencil=a(d));d=d.stencil.cloneNode(!1);return d.setAttribute("data-mce-index",
c),b&&d.appendChild(p.doc.createTextNode(b)),d}return function(a){var c,d,e,h=a.startNode,l=a.endNode,f=a.matchIndex,k=p.doc;if(h===l)return e=h.parentNode,0<a.startNodeIndex&&(c=k.createTextNode(h.data.substring(0,a.startNodeIndex)),e.insertBefore(c,h)),c=b(a.match,f),e.insertBefore(c,h),a.endNodeIndex<h.length&&(d=k.createTextNode(h.data.substring(a.endNodeIndex)),e.insertBefore(d,h)),h.parentNode.removeChild(h),c;c=k.createTextNode(h.data.substring(0,a.startNodeIndex));d=k.createTextNode(l.data.substring(a.endNodeIndex));
for(var k=b(h.data.substring(a.startNodeIndex),f),g=[],u=0,q=a.innerNodes.length;u<q;++u){var w=a.innerNodes[u],t=b(w.data,f);w.parentNode.replaceChild(t,w);g.push(t)}a=b(l.data.substring(0,a.endNodeIndex),f);return(e=h.parentNode).insertBefore(c,h),e.insertBefore(k,h),e.removeChild(h),(e=l.parentNode).insertBefore(a,l),e.insertBefore(d,l),e.removeChild(l),a}}(b)),this},unwrap:h,replace:function(a,c){a=g(a);return a.deleteContents(),0<c.length&&a.insertNode(b.dom.doc.createTextNode(c)),a},rangeFromMatch:g,
indexOf:d}}var g=function(a){var b=a;return{get:function(){return b},set:function(a){b=a},clone:function(){return g(b)}}},r=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(a){var b=a.getParam("language","en");return a.getParam("spellchecker_language",b)},z=function(a){return a.getParam("spellchecker_wordchar_pattern",/[^\s!"#$%&()*+,-./:;<=>?@[\]^_{|}`\u00a7\u00a9\u00ab\u00ae\u00b1\u00b6\u00b7\u00b8\u00bb\u00bc\u00bd\u00be\u00bf\u00d7\u00f7\u00a4\u201d\u201c\u201e\u00a0\u2002\u2003\u2009]+/g)},
y=tinymce.util.Tools.resolve("tinymce.util.Tools"),J=tinymce.util.Tools.resolve("tinymce.util.URI"),K=tinymce.util.Tools.resolve("tinymce.util.XHR"),A,C=function(a,b){b.get()||(a=p(a.getBody(),a),b.set(a));return b.get()},G=function(a,b,c,e,d,k,h){(a.getParam("spellchecker_callback")||function(d,h,e,k){var f={method:d,lang:c.get()},g="";f["addToDictionary"===d?"word":"text"]=h;y.each(f,function(a,b){g&&(g+="&");g+=b+"="+encodeURIComponent(a)});K.send({url:(new J(b)).toAbsolute(a.getParam("spellchecker_rpc_url")),
type:"post",content_type:"application/x-www-form-urlencoded",data:g,success:function(b){(b=JSON.parse(b))?b.error?k(b.error):e(b):(b=a.translate("Server response wasn't proper JSON."),k(b))},error:function(){var b=a.translate("The spelling service was not found: (")+a.getParam("spellchecker_rpc_url")+a.translate(")");k(b)}})}).call(a.plugins.spellchecker,e,d,k,h)},E=function(a,b,c){a.dom.select("span.mce-spellchecker-word").length||D(a,b,c)},D=function(a,b,c){if(C(a,c).reset(),c.set(null),b.get())return b.set(!1),
a.fire("SpellcheckEnd"),!0},H=function(a){a=a.getAttribute("data-mce-index");return"number"==typeof a?""+a:a},I=function(a,b,c,e,d){var k,h;if("string"!=typeof d&&d.words?(h=!!d.dictionary,k=d.words):k=d,a.setProgressState(!1),function(a){for(var b in a)return!1;return!0}(k))return c=a.translate("No misspellings found."),a.notificationManager.open({text:c,type:"info"}),void b.set(!1);e.set({suggestions:k,hasDictionarySupport:h});C(a,c).find(z(a)).filter(function(a){return!!k[a.text]}).wrap(function(b){return a.dom.create("span",
{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":b.text})});b.set(!0);a.fire("SpellcheckStart")},v={spellcheck:function(a,b,c,e,d,k){D(a,c,e)||(a.setProgressState(!0),G(a,b,k,"spellcheck",C(a,e).text,function(b){I(a,c,e,d,b)},function(b){a.notificationManager.open({text:b,type:"error"});a.setProgressState(!1);D(a,c,e)}),a.focus())},checkIfFinished:E,addToDictionary:function(a,b,c,e,d,k,h){a.setProgressState(!0);G(a,b,d,"addToDictionary",k,function(){a.setProgressState(!1);a.dom.remove(h,
!0);E(a,c,e)},function(b){a.notificationManager.open({text:b,type:"error"});a.setProgressState(!1)})},ignoreWord:function(a,b,c,e,d,k){a.selection.collapse();k?y.each(a.dom.select("span.mce-spellchecker-word"),function(b){b.getAttribute("data-mce-word")===e&&a.dom.remove(b,!0)}):a.dom.remove(d,!0);E(a,b,c)},findSpansByIndex:function(a,b){var c=[];if((a=y.toArray(a.getBody().getElementsByTagName("span"))).length)for(var e=0;e<a.length;e++){var d=H(a[e]);null!==d&&d.length&&d===b.toString()&&c.push(a[e])}return c},
getElmIndex:H,markErrors:I},L=function(a,b,c,e,d){return{getTextMatcher:function(){return e.get()},getWordCharPattern:function(){return z(a)},markErrors:function(d){v.markErrors(a,b,e,c,d)},getLanguage:function(){return n(a)}}},M=function(a,b,c,e,d,k){a.addCommand("mceSpellCheck",function(){v.spellcheck(a,b,c,e,d,k)})},N=function(a,b,c,e,d,k){var h,f,g=(h=y.map(a.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv").split(","),
function(a){return{name:(a=a.split("="))[0],value:a[1]}}),f=[],y.each(h,function(a){f.push({selectable:!0,text:a.name,data:a.value})}),f);h=function(){v.spellcheck(a,b,c,e,k,d)};var q={tooltip:"Spellcheck",onclick:h,onPostRender:function(b){var d=b.control;a.on("SpellcheckStart SpellcheckEnd",function(){d.active(c.get())})}};1<g.length&&(q.type="splitbutton",q.menu=g,q.onshow=function(b){var c=n(a);b.control.items().each(function(a){a.active(a.settings.data===c)})},q.onselect=function(a){d.set(a.control.settings.data)});
a.addButton("spellchecker",q);a.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:h,selectable:!0,onPostRender:function(){var b=this;b.active(c.get());a.on("SpellcheckStart SpellcheckEnd",function(){b.active(c.get())})}})},O=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),P=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Q=function(a,b,c,e,d,f){a.on("click",function(h){var g=h.target;if("mce-spellchecker-word"===g.className&&(h.preventDefault(),h=v.findSpansByIndex(a,v.getElmIndex(g)),
0<h.length)){var k=a.dom.createRng();k.setStartBefore(h[0]);k.setEndAfter(h[h.length-1]);a.selection.setRng(k);(function(a,b,c,d,e,h,f,g){var k=[],l=c.get().suggestions[f];y.each(l,function(b){k.push({text:b,onclick:function(){a.insertContent(a.dom.encode(b));a.dom.remove(g);v.checkIfFinished(a,d,e)}})});k.push({text:"-"});c.get().hasDictionarySupport&&k.push({text:"Add to Dictionary",onclick:function(){v.addToDictionary(a,b,d,e,h,f,g)}});k.push.apply(k,[{text:"Ignore",onclick:function(){v.ignoreWord(a,
d,e,f,g)}},{text:"Ignore all",onclick:function(){v.ignoreWord(a,d,e,f,g,!0)}}]);(A=P.create("menu",{items:k,context:"contextmenu",onautohide:function(a){-1!==a.target.className.indexOf("spellchecker")&&a.preventDefault()},onhide:function(){A.remove();A=null}})).renderTo(document.body);c=O.DOM.getPos(a.getContentAreaContainer());var l=a.dom.getPos(g[0]),n=a.dom.getRoot();"BODY"===n.nodeName?(l.x-=n.ownerDocument.documentElement.scrollLeft||n.scrollLeft,l.y-=n.ownerDocument.documentElement.scrollTop||
n.scrollTop):(l.x-=n.scrollLeft,l.y-=n.scrollTop);c.x+=l.x;c.y+=l.y;A.moveTo(c.x,c.y+g[0].offsetHeight)})(a,b,c,e,d,f,g.getAttribute("data-mce-word"),h)}})};r.add("spellchecker",function(a,b){if(!1===!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(a.settings.plugins)||!r.get("tinymcespellchecker")||("undefined"!=typeof window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))){var c=g(!1),
e=g(n(a)),d=g(null),f=g({});return N(a,b,c,d,e,f),Q(a,b,f,c,d,e),M(a,b,c,d,f,e),L(a,c,f,d,b)}})}();
